import{e as P,_ as A}from"./index.516baaea.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                */import{d as L,r as R,b0 as U,C as E,D as H,aI as i,aH as r,aE as x,aM as C,bQ as K,bR as N,aX as O,bb as T,bE as M,bP as V,bC as j,bF as z,bd as G,be as Q,G as B}from"./arco.cd87ac27.js";import{e as X,f as q,g as J}from"./serial.472eb3ab.js";import"./chart.19f3a5b6.js";import"./vue.a1682e6c.js";const I=b=>(G("data-v-1a97cce4"),b=b(),Q(),b),W={class:"container"},Y=I(()=>B("div",{id:"canvasDiv",style:{zoom:"250%"}},null,-1)),Z=I(()=>B("br",null,null,-1)),$={name:"Backup"},tt=L({...$,setup(b){const g=P(),c=R({activeKey:1,binaryFile:void 0,loading:!1}),k=()=>{const e=document.createElement("input");e.type="file",e.onchange=async()=>{const d=new Blob([e.files[0]],{type:"application/octet-stream"}),s=URL.createObjectURL(d),a=document.createElement("canvas");a.width=128,a.height=64;const p=a.cloneNode(),u=document.getElementById("canvasDiv");u.innerHTML="",u==null||u.append(a,p);const m=new Image;m.src=s,m.onload=()=>{const l=a.getContext("2d");l==null||l.drawImage(m,0,0,128,64);const f=l==null?void 0:l.getImageData(0,0,a.width,a.height).data;function y(o,n){const t=(n*128+o)*4;return f[t]+f[t+1]+f[t+2]>128*3?0:1}const h=p.getContext("2d"),_=h.getImageData(0,0,p.width,p.height);for(let o=0;o<64;o++)for(let n=0;n<128;n++){const t=(o*128+n)*4,w=!y(n,o);_.data[t]=w*255,_.data[t+1]=w*255,_.data[t+2]=w*255,_.data[t+3]=255}h.putImageData(_,0,0);const F=new Uint8Array(1024);let S=0;for(let o=0;o<64;o+=8)for(let n=0;n<128;n++){let v=0;for(let t=0;t<8;t++)v|=y(n,o+t)<<t;F[S++]=v}c.binaryFile=F}},e.click()},D=async()=>{if(g.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}c.loading=!0;let e=123728;c.activeKey==2&&(e=8320),await X(g.connectPort);const d=c.binaryFile;for(let s=e;s<d.length+e;s+=128)await q(g.connectPort,s,d.slice(s-e,s-e+128));await J(g.connectPort),c.loading=!1};return(e,d)=>{const s=U("Breadcrumb"),a=K,p=N,u=O,m=T,l=M,f=V,y=j,h=z;return E(),H("div",W,[i(s,{items:["\u5C0F\u5DE5\u5177","\u5F00\u673A\u56FE\u7247"]}),i(h,{gutter:20,align:"stretch"},{default:r(()=>[i(y,{span:24},{default:r(()=>[i(f,{loading:c.loading,tip:"\u5199\u5165\u4E2D...",style:{width:"100%"}},{default:r(()=>[i(l,{class:"general-card",title:"\u5F00\u673A\u56FE\u7247"},{default:r(()=>[i(p,{"active-key":c.activeKey,onChange:d[0]||(d[0]=_=>{c.activeKey=_})},{default:r(()=>[(E(),x(a,{key:1,title:"LOSEHU 117"})),(E(),x(a,{key:2,title:"LOSEHU 118+"}))]),_:1},8,["active-key"]),Y,Z,i(m,null,{default:r(()=>[i(u,{onClick:k},{default:r(()=>[C("\u9009\u62E9\u56FE\u7247")]),_:1}),i(u,{type:"primary",disabled:!c.binaryFile,onClick:D},{default:r(()=>[C("\u5199\u5165")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})])}}});const dt=A(tt,[["__scopeId","data-v-1a97cce4"]]);export{dt as default};
