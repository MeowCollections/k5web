import{e as P,_ as A}from"./index.45dd0990.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                */import{d as L,r as R,b0 as U,C as F,D as H,aI as i,aH as l,aE as x,aM as B,bQ as K,bR as N,aX as O,bb as T,bE as M,bP as V,bC as j,bF as z,bd as G,be as Q,G as C}from"./arco.cd87ac27.js";import{e as X,f as q,g as J}from"./serial.472eb3ab.js";import"./chart.19f3a5b6.js";import"./vue.a1682e6c.js";const I=b=>(G("data-v-3f4493e9"),b=b(),Q(),b),W={class:"container"},Y=I(()=>C("div",{id:"canvasDiv",style:{zoom:"250%"}},null,-1)),Z=I(()=>C("br",null,null,-1)),$={name:"Backup"},tt=L({...$,setup(b){const g=P(),s=R({activeKey:1,binaryFile:void 0,loading:!1}),k=()=>{const e=document.createElement("input");e.type="file",e.onchange=async()=>{const d=new Blob([e.files[0]],{type:"application/octet-stream"}),c=URL.createObjectURL(d),a=document.createElement("canvas");a.classList.add("mt-3","mr-3","border","shadow-sm"),a.width=128,a.height=64;const p=a.cloneNode(),u=document.getElementById("canvasDiv");u.innerHTML="",u==null||u.append(a,p);const m=new Image;m.src=c,m.onload=()=>{const r=a.getContext("2d");r==null||r.drawImage(m,0,0,128,64);const f=r==null?void 0:r.getImageData(0,0,a.width,a.height).data;function y(o,n){const t=(n*128+o)*4;return f[t]+f[t+1]+f[t+2]>128*3?0:1}const h=p.getContext("2d"),_=h.getImageData(0,0,p.width,p.height);for(let o=0;o<64;o++)for(let n=0;n<128;n++){const t=(o*128+n)*4,w=!y(n,o);_.data[t]=w*255,_.data[t+1]=w*255,_.data[t+2]=w*255,_.data[t+3]=255}h.putImageData(_,0,0);const E=new Uint8Array(1024);let S=0;for(let o=0;o<64;o+=8)for(let n=0;n<128;n++){let v=0;for(let t=0;t<8;t++)v|=y(n,o+t)<<t;E[S++]=v}s.binaryFile=E}},e.click()},D=async()=>{if(g.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}s.loading=!0;let e=123728;s.activeKey==2&&(e=8320),await X(g.connectPort);const d=s.binaryFile;for(let c=e;c<d.length+e;c+=128)await q(g.connectPort,c,d.slice(c-e,c-e+128));await J(g.connectPort),s.loading=!1};return(e,d)=>{const c=U("Breadcrumb"),a=K,p=N,u=O,m=T,r=M,f=V,y=j,h=z;return F(),H("div",W,[i(c,{items:["\u5C0F\u5DE5\u5177","\u5F00\u673A\u56FE\u7247"]}),i(h,{gutter:20,align:"stretch"},{default:l(()=>[i(y,{span:24},{default:l(()=>[i(f,{loading:s.loading,tip:"\u5199\u5165\u4E2D...",style:{width:"100%"}},{default:l(()=>[i(r,{class:"general-card",title:"\u5F00\u673A\u56FE\u7247"},{default:l(()=>[i(p,{"active-key":s.activeKey,onChange:d[0]||(d[0]=_=>{s.activeKey=_})},{default:l(()=>[(F(),x(a,{key:1,title:"LOSEHU 117"})),(F(),x(a,{key:2,title:"LOSEHU 118+"}))]),_:1},8,["active-key"]),Y,Z,i(m,null,{default:l(()=>[i(u,{onClick:k},{default:l(()=>[B("\u9009\u62E9\u56FE\u7247")]),_:1}),i(u,{type:"primary",disabled:!s.binaryFile,onClick:D},{default:l(()=>[B("\u66F4\u65B0")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})])}}});const dt=A(tt,[["__scopeId","data-v-3f4493e9"]]);export{dt as default};
