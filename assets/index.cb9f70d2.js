import{e as m,q as h,_ as g}from"./index.e25b35a8.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as B,r as E,bB as v,bC as k,C,D,aI as i,aH as _,aM as F,bw as y,bx as A,G as x,aZ as R,b8 as H,bD as M,bM as T,n as P}from"./arco.beabb834.js";import{e as S,f as U,g as $}from"./serial.b70f48dc.js";import"./chart.83b8c11b.js";import"./vue.30c84055.js";const I={class:"container"},N=["innerHTML"],V={name:"Chi"},L=B({...V,setup(q){const c=m(),d=E({status:"\u70B9\u51FB\u5199\u5165\u6309\u94AE\u5199\u5165\u5B57\u5E93\u5230\u8BBE\u5907<br/><br/>",eepromType:"",showHide:0}),p=async(u=0,t)=>{var f;await S(c.connectPort);for(let n=u;n<t.length+u;n+=128)await U(c.connectPort,n,t.slice(n-u,n-u+128),128,(f=c.configuration)==null?void 0:f.uart),d.status=d.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A"+((n-u)/t.length*100).toFixed(1)+"%<br/>",P(()=>{const s=document==null?void 0:document.getElementById("statusArea");s&&(s.scrollTop=s==null?void 0:s.scrollHeight)});d.status=d.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A100.0%<br/>",await $(c.connectPort)},w=async(u=1)=>{var f,n,s,b;if(c.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}if(((f=c.configuration)==null?void 0:f.uart)=="official"){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}if(u==1&&((n=c.configuration)==null?void 0:n.charset)!="losehu"||u==1&&((s=c.configuration)==null?void 0:s.K)!=!0){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}if(u==2&&((b=c.configuration)==null?void 0:b.charset)!="gb2312"){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}d.status=d.status+"\u6B63\u5728\u4E0B\u8F7D\u5B57\u5E93...<br />";let t;if(u==1){t=await fetch("/old_font.bin");const o=t.body.getReader(),e=[];for(;;){const{done:a,value:l}=await o.read();if(a)break;e.push(...l)}const r=new Uint8Array(e);await p(8192,r);return}if(u==2){t=await fetch("/new_font_k.bin");const o=t.body.getReader(),e=[];for(;;){const{done:a,value:l}=await o.read();if(a)break;e.push(...l)}const r=new Uint8Array(e);await p(9344,r);return}if(u==3){t=await fetch("/new_font_h.bin");const o=t.body.getReader(),e=[];for(;;){const{done:a,value:l}=await o.read();if(a)break;e.push(...l)}const r=new Uint8Array(e);await p(9344,r);return}if(u==4){t=await fetch("/pinyin.bin");const o=t.body.getReader(),e=[];for(;;){const{done:a,value:l}=await o.read();if(a)break;e.push(...l)}const r=new Uint8Array(e);await p(131072,r);return}if(u==5){t=await fetch("/pinyin_plus.bin");const o=t.body.getReader(),e=[];for(;;){const{done:a,value:l}=await o.read();if(a)break;e.push(...l)}const r=new Uint8Array(e);await p(131072,r);return}};return(u,t)=>{const f=h,n=R,s=H,b=v,o=k,e=M,r=T;return C(),D("div",I,[i(f,{items:["\u5C0F\u5DE5\u5177","\u5B57\u5E93\u5199\u5165"]}),i(r,{gutter:20,align:"stretch"},{default:_(()=>[i(e,{span:24},{default:_(()=>[i(o,{class:"general-card",title:"\u5B57\u5E93\u5199\u5165",onClick:t[4]||(t[4]=()=>{d.showHide+=1})},{default:_(()=>[i(s,null,{default:_(()=>[i(n,{onClick:t[0]||(t[0]=a=>w(1))},{default:_(()=>[F("\u5199\u5165 117 \u5B57\u5E93")]),_:1}),i(n,{onClick:t[1]||(t[1]=a=>w(2))},{default:_(()=>[F("\u5199\u5165 118+ \u5B57\u5E93")]),_:1}),i(n,{onClick:t[2]||(t[2]=a=>w(4))},{default:_(()=>[F("\u5199\u5165\u62FC\u97F3\u68C0\u7D22\u8868\uFF082Mbit EEPROM\u53EF\u7528\uFF09")]),_:1}),y(i(n,{onClick:t[3]||(t[3]=a=>w(5))},{default:_(()=>[F("\u5199\u5165\u62FC\u97F3\u68C0\u7D22\u8868\uFF08\u6D4B\u8BD5\uFF09")]),_:1},512),[[A,d.showHide>=5]])]),_:1}),i(b),x("div",{id:"statusArea",style:{height:"20em","background-color":"azure",color:"silver",overflow:"auto",padding:"20px"},innerHTML:d.status},null,8,N)]),_:1})]),_:1})]),_:1})])}}});const X=g(L,[["__scopeId","data-v-b186eaff"]]);export{X as default};
