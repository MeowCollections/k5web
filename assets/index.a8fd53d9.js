import{e as k,q as O,_ as N}from"./index.8a36ce60.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as U,r as I,bU as L,aU as j,bB as H,bN as J,bC as M,C as d,D as _,aI as l,aH as o,u as P,aK as f,aJ as b,aE as F,aM as p,aN as g,G as R,n as q,bX as z,ba as G,aZ as K,b8 as X,bD as Z,bM as Q}from"./arco.f883ed21.js";import"./serial.3518333f.js";import{u as W}from"./loading.50b9fdaf.js";import"./chart.977fd17b.js";import"./vue.170d1f1d.js";const Y={class:"container"},$=["innerHTML"],tt={name:"Chi"},at=U({...tt,setup(et){const{loading:C,setLoading:h}=W(!0),B=k(),t=I({status:"\u70B9\u51FB\u5199\u5165\u6309\u94AE\u5199\u5165\u536B\u661F\u6570\u636E\u5230\u8BBE\u5907<br/><br/>",sat:"",satData:[],lng:0,lat:0,alt:0,tx:0,rx:0,txTone:void 0,CTCSSOption:[67,69.3,71.9,74.4,77,79.7,82.5,85.4,88.5,91.5,94.8,97.4,100,103.5,107.2,110.9,114.8,118.8,123,127.3,131.8,136.5,141.3,146.2,151.4,156.7,159.8,162.2,165.5,167.9,171.3,173.8,177.3,179.9,183.5,186.2,189.9,192.8,196.6,199.5,203.5,206.5,210.7,218.1,225.7,229.1,233.6,241.8,250.3,254.1],pass:void 0,passOption:[]}),w=async u=>{const a=t.satData.find(s=>s.name==u);a&&a.path&&(t.status+="<br/>\u536B\u661F\u53C2\u6570\uFF1A<br/>",a.path.map(s=>{t.status+=s+"<br/>"})),q(()=>{const s=document==null?void 0:document.getElementById("statusArea");s&&(s.scrollTop=s==null?void 0:s.scrollHeight)})};(async()=>{h(!0);const a=(await(await fetch("https://celestrak.org/NORAD/elements/amateur.txt")).text()).split(/\r?\n/),s=[];let n={};for(let r=0;r<a.length;r++)Number.isNaN(parseInt(a[r].substring(0,1)))?(n.name&&n.name!=""&&(s.push(n),n={}),n.name=a[r]):(n.path||(n.path=[]),n.path.push(a[r]));t.satData=s,h(!1)})();const y=async()=>{navigator.geolocation.getCurrentPosition(u=>{u.coords&&(t.lat=u.coords.latitude,t.lng=u.coords.longitude,u.coords.altitude&&(t.alt=u.coords.altitude))})};y();const x=async()=>{if(!t.sat){alert("\u8BF7\u9009\u62E9\u536B\u661F\uFF01");return}const u=await(await fetch("https://k5.vicicode.com/api/pass",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({sat:t.sat,sat_line_1:t.satData.find(s=>s.name==t.sat).path[0],sat_line_2:t.satData.find(s=>s.name==t.sat).path[1],lat:t.lat,lng:t.lng,alt:t.alt})})).json(),a=[];for(let s=0;s<u.pass_times.length;s++){const n=[u.pass_times[s],u.departure_times[s]];a.push(n)}t.pass=void 0,t.passOption=a},E=async()=>{if(B.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}if(!t.pass){alert("\u8BF7\u9009\u62E9\u8FC7\u5883\u65F6\u95F4\uFF01");return}const u=await(await fetch("https://k5.vicicode.com/api/doppler",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({sat:t.sat,sat_line_1:t.satData.find(a=>a.name==t.sat).path[0],sat_line_2:t.satData.find(a=>a.name==t.sat).path[1],lat:t.lat,lng:t.lng,alt:t.alt,tx:t.tx,rx:t.rx,pass_time:t.pass.split("|")[0],departure_time:t.pass.split("|")[1]})})).json();t.status+=JSON.stringify(u.shift_array)+"<br/>"};return(u,a)=>{const s=O,n=z,r=L,i=G,c=j,m=K,V=X,D=H,v=J,S=M,A=Z,T=Q;return d(),_("div",Y,[l(s,{items:["\u5C0F\u5DE5\u5177","\u536B\u661F\u5199\u5165"]}),l(T,{gutter:20,align:"stretch"},{default:o(()=>[l(A,{span:24},{default:o(()=>[l(S,{class:"general-card",title:"\u536B\u661F\u5199\u5165"},{default:o(()=>[l(v,{loading:P(C),style:{width:"100%"},tip:"\u6B63\u5728\u4E0B\u8F7D\u536B\u661F\u6570\u636E ..."},{default:o(()=>[l(i,{"label-col-style":{width:"25%"},field:"sat",label:"\u9009\u62E9\u536B\u661F"},{default:o(()=>[l(r,{modelValue:t.sat,"onUpdate:modelValue":a[0]||(a[0]=e=>t.sat=e),onChange:w,placeholder:"\u9009\u62E9\u536B\u661F ...","allow-search":"","allow-clear":""},{default:o(()=>[(d(!0),_(f,null,b(t.satData,e=>(d(),F(n,{key:e.name,value:e.name},{default:o(()=>[p(g(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"lng",label:"\u53F0\u7AD9\u7ECF\u5EA6"},{default:o(()=>[l(c,{precision:6,modelValue:t.lng,"onUpdate:modelValue":a[1]||(a[1]=e=>t.lng=e)},null,8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"lat",label:"\u53F0\u7AD9\u7EAC\u5EA6"},{default:o(()=>[l(c,{precision:6,modelValue:t.lat,"onUpdate:modelValue":a[2]||(a[2]=e=>t.lat=e)},null,8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"alt",label:"\u53F0\u7AD9\u6D77\u62D4"},{default:o(()=>[l(c,{precision:0,modelValue:t.alt,"onUpdate:modelValue":a[3]||(a[3]=e=>t.alt=e)},null,8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},label:""},{default:o(()=>[l(V,null,{default:o(()=>[l(m,{onClick:y},{default:o(()=>[p("\u6D4F\u89C8\u5668\u83B7\u53D6\u7ECF\u7EAC\u5EA6")]),_:1}),l(m,{onClick:x},{default:o(()=>[p("\u83B7\u53D6\u536B\u661F\u8FC7\u5883\u65F6\u95F4")]),_:1})]),_:1})]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"pass",label:"\u9009\u62E9\u8FC7\u5883\u65F6\u95F4"},{default:o(()=>[l(r,{modelValue:t.pass,"onUpdate:modelValue":a[4]||(a[4]=e=>t.pass=e),"allow-search":"","allow-clear":""},{default:o(()=>[(d(!0),_(f,null,b(t.passOption,e=>(d(),F(n,{key:e[0]+"|"+e[1],value:e[0]+"|"+e[1]},{default:o(()=>[p(g(e[0]+" - "+e[1]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"tx",label:"\u4E0A\u884C\u9891\u7387"},{default:o(()=>[l(c,{precision:5,modelValue:t.tx,"onUpdate:modelValue":a[5]||(a[5]=e=>t.tx=e)},null,8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"txTone",label:"\u4E0A\u884C\u4E9A\u97F3"},{default:o(()=>[l(r,{modelValue:t.txTone,"onUpdate:modelValue":a[6]||(a[6]=e=>t.txTone=e),"allow-search":"","allow-clear":""},{default:o(()=>[(d(!0),_(f,null,b(t.CTCSSOption,e=>(d(),F(n,{key:e,value:e},{default:o(()=>[p(g(e.toFixed(1)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},field:"rx",label:"\u4E0B\u884C\u9891\u7387"},{default:o(()=>[l(c,{precision:5,modelValue:t.rx,"onUpdate:modelValue":a[7]||(a[7]=e=>t.rx=e)},null,8,["modelValue"])]),_:1}),l(i,{"label-col-style":{width:"25%"},label:""},{default:o(()=>[l(m,{onClick:E},{default:o(()=>[p("\u5199\u5165\u6570\u636E")]),_:1})]),_:1}),l(D),R("div",{id:"statusArea",style:{height:"20em","background-color":"azure",color:"silver",overflow:"auto",padding:"20px"},innerHTML:t.status},null,8,$)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])}}});const ht=N(at,[["__scopeId","data-v-02833906"]]);export{ht as default};
