import{e as z,v as $,_ as J}from"./index.6e56b4a3.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import{d as K,r as G,c as Q,b0 as X,C as d,D as b,aI as r,aH as n,aM as m,u as q,aN as C,aK as V,aJ as I,aE as g,a6 as W,aX as Y,bb as Z,bC as tt,bF as et,b6 as at,bG as ot,bH as nt,aU as ut,aV as rt,bI as lt,bE as dt}from"./arco.cd87ac27.js";import{u as st}from"./loading.1ec94507.js";import{e as A,a as B,u as it,b as pt,h as E,s as mt,f as U,g as ft}from"./serial.3518333f.js";import"./chart.19f3a5b6.js";import"./vue.a1682e6c.js";const xt={class:"container"},ct={name:"SearchTable"},wt=K({...ct,setup(St){const x=z(),{loading:h,setLoading:y}=st(!1),{t:N}=$.exports.useI18n(),u=G({nowPage:1,bandwidthOption:{0:"25KHz",1:"12.5KHz"},modeOption:{0:"FM",1:"AM",2:"USB"},powerOption:{0:"\u4F4E",1:"\u4E2D",2:"\u9AD8"},toneOption:{1:"\u4E9A\u97F3\u9891",2:"\u6570\u5B57\u4E9A\u97F3",3:"\u53CD\u5411\u6570\u5B57\u4E9A\u97F3"},CTCSSOption:[67,69.3,71.9,74.4,77,79.7,82.5,85.4,88.5,91.5,94.8,97.4,100,103.5,107.2,110.9,114.8,118.8,123,127.3,131.8,136.5,141.3,146.2,151.4,156.7,159.8,162.2,165.5,167.9,171.3,173.8,177.3,179.9,183.5,186.2,189.9,192.8,196.6,199.5,203.5,206.5,210.7,218.1,225.7,229.1,233.6,241.8,250.3,254.1],DCSOption:[23,25,26,31,32,36,43,47,51,53,54,65,71,72,73,74,114,115,116,122,125,131,132,134,143,145,152,155,156,162,165,172,174,205,212,223,225,226,243,244,245,246,251,252,255,261,263,265,266,271,274,306,311,315,325,331,332,343,346,351,356,364,365,371,411,412,413,423,431,432,445,446,452,454,455,462,464,465,466,503,506,516,523,526,532,546,565,606,612,624,627,631,632,654,662,664,703,712,723,731,732,734,743,754],stepOption:[2.5,5,6.25,10,12.5,25,8.33,.01,.05,.1,.25,.5,1,1.25,9,15,20,30,50,100,125,200,250,500],scrambOption:["1","2","3","4","5","6","7","8","9","10"],pttidOption:["\u4E0A\u7EBF\u7801","\u4E0B\u7EBF\u7801","\u4E0A\u7EBF+\u4E0B\u7EBF\u7801","Quindar\u7801"],renderData:[]});(()=>{const i=[];Array.from({length:200}).map(S=>{i.push({})}),u.renderData=i})();const v=Q(()=>[{title:N("searchTable.columns.index"),dataIndex:"index",slotName:"index",width:70},{title:"\u4FE1\u9053\u540D\u79F0",dataIndex:"name",slotName:"name",width:200},{title:"\u5E26\u5BBD",dataIndex:"bandwidth",slotName:"bandwidth",width:150},{title:"\u63A5\u6536\u9891\u7387",dataIndex:"rx",slotName:"rx",width:150},{title:"\u53D1\u9001\u9891\u7387",dataIndex:"tx",slotName:"tx",width:150},{title:"\u53D1\u9001\u529F\u7387",dataIndex:"power",slotName:"power",width:150},{title:"\u63A5\u6536\u4E9A\u97F3\u7C7B\u578B",dataIndex:"rxTone",slotName:"rxTone",width:150},{title:"\u63A5\u6536\u4E9A\u97F3\u9891\uFF08Hz\uFF09",dataIndex:"rxCTCSS",slotName:"rxCTCSS",width:150},{title:"\u63A5\u6536\u4E9A\u97F3\u6570\u7801",dataIndex:"rxDCS",slotName:"rxDCS",width:150},{title:"\u53D1\u9001\u4E9A\u97F3\u7C7B\u578B",dataIndex:"txTone",slotName:"txTone",width:150},{title:"\u53D1\u9001\u4E9A\u97F3\u9891\uFF08Hz\uFF09",dataIndex:"txCTCSS",slotName:"txCTCSS",width:150},{title:"\u53D1\u9001\u4E9A\u97F3\u6570\u7801",dataIndex:"txDCS",slotName:"txDCS",width:150},{title:"\u9891\u7387\u6B65\u8FDB",dataIndex:"step",slotName:"step",width:150},{title:"\u5012\u9891",dataIndex:"reverse",slotName:"reverse",width:150},{title:"\u52A0\u5BC6",dataIndex:"scramb",slotName:"scramb",width:150},{title:"\u7E41\u5FD9\u7981\u53D1",dataIndex:"busy",slotName:"busy",width:150},{title:"\u4FE1\u4EE4\u7801",dataIndex:"pttid",slotName:"pttid",width:150},{title:"\u4FE1\u9053\u6A21\u5F0F",dataIndex:"mode",slotName:"mode",width:150},{title:"DTMF\u89E3\u7801",dataIndex:"dtmf",slotName:"dtmf",width:150},{title:"\u64CD\u4F5C",dataIndex:"operate",slotName:"operate",width:150}]),k=async()=>{var p,O,F;if(x.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}await A(x.connectPort),y(!0);let i=new Uint8Array(3200);for(let e=0;e<3200;e+=128){const l=await B(x.connectPort,e,128,(p=x.configuration)==null?void 0:p.uart);i.set(l,e)}let S=new Uint8Array(3200);for(let e=3920;e<7120;e+=128){const l=await B(x.connectPort,e,128,(O=x.configuration)==null?void 0:O.uart);S.set(l,e-3920)}const _=[];for(let e=0;e<3200;e+=16){const l=it(i.subarray(e,e+16));console.log(l);const a={};a.rx=l.substr(24,8)!="ffffffff"?parseInt(l.substr(24,8),16)/1e5:void 0,a.rx&&(a.offset=l.substr(16,8)!="00000000"?parseInt(l.substr(16,8),16)/1e5:void 0,a.txcodeflag=l.substr(9,1),a.txcodeflag=="1"&&(a.tx=a.rx+a.offset),a.txcodeflag=="2"&&(a.tx=a.rx-a.offset),a.txTone=parseInt(l.substr(10,1),16)>0?parseInt(l.substr(10,1),16).toString():void 0,a.rxTone=parseInt(l.substr(11,1),16)>0?parseInt(l.substr(11,1),16).toString():void 0,a.txTone=="1"&&(a.txCTCSS=u.CTCSSOption[parseInt(l.substr(12,2),16)]),(a.txTone=="2"||a.txTone=="3")&&(a.txDCS=u.DCSOption[parseInt(l.substr(12,2),16)]),a.rxTone=="1"&&(a.rxCTCSS=u.CTCSSOption[parseInt(l.substr(14,2),16)]),(a.rxTone=="2"||a.rxTone=="3")&&(a.rxDCS=u.DCSOption[parseInt(l.substr(14,2),16)]),a.step=u.stepOption[parseInt(l.substr(2,2),16)],a.scramb=parseInt(l.substr(0,2),16)>0?parseInt(l.substr(0,2),16).toString():void 0,a.power_reverse_busy_width=parseInt(l.substr(6,2),16),a.reverse=!!(a.power_reverse_busy_width>>0&1),a.bandwidth=(a.power_reverse_busy_width>>1&1).toString(),a.power=(a.power_reverse_busy_width>>2&3).toString(),a.busy=!!(a.power_reverse_busy_width>>4&1),a.pttid_dtmf=parseInt(l.substr(4,2),16),a.pttid=u.pttidOption[(a.pttid_dtmf>>1)-1],a.dtmf=!!(a.pttid_dtmf>>0&1),a.mode=parseInt(l.substr(8,1),16).toString(),a.name=pt(S.subarray(e,e+16),(F=x.configuration)==null?void 0:F.charset)),_.push(a)}u.renderData=_,y(!1)},P=async()=>{var O,F;if(x.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}await A(x.connectPort),y(!0);let i=new Uint8Array(3200),S=new Uint8Array(200),_=new Uint8Array(3200),p=0;u.renderData.map(e=>{var l;if(e.rx){let a="";a+=parseInt(e.scramb)>0?parseInt(e.scramb).toString(16).padStart(2,"0"):"00",a+=u.stepOption.indexOf(e.step)>=0?u.stepOption.indexOf(e.step).toString(16).padStart(2,"0"):"00";let c=u.pttidOption.indexOf(e.pttid)+1<<1;c+=e.dtmf?1:0,a+=c.toString(16).padStart(2,"0");let f=e.busy?1<<4:0;switch(f+=e.power<<2,f+=e.bandwidth<<1,f+=e.reverse?1:0,a+=f.toString(16).padStart(2,"0"),a+=e.mode?e.mode.toString(16):"0",e.tx>0&&e.tx>e.rx?a+="1":e.tx>0&&e.tx<e.rx?a+="2":a+="0",a+=parseInt(e.txTone)>0?e.txTone.toString(16):"0",a+=parseInt(e.rxTone)>0?e.rxTone.toString(16):"0",e.txTone){case"1":a+=u.CTCSSOption.indexOf(e.txCTCSS).toString(16).padStart(2,"0");break;case"2":case"3":a+=u.DCSOption.indexOf(e.txDCS).toString(16).padStart(2,"0");break;default:a+="00"}switch(e.rxTone){case"1":a+=u.CTCSSOption.indexOf(e.rxCTCSS).toString(16).padStart(2,"0");break;case"2":case"3":a+=u.DCSOption.indexOf(e.rxDCS).toString(16).padStart(2,"0");break;default:a+="00"}const T=e.tx&&e.rx?Math.abs(parseInt((e.tx*1e5).toFixed(0))-parseInt((e.rx*1e5).toFixed(0))):NaN;a+=Number.isNaN(T)?"00000000":T.toString(16).padStart(8,"0"),a+=parseInt((e.rx*1e5).toFixed(0)).toString(16).padStart(8,"0"),console.log(a),i.set(E(a),p),S.set([197],p>>4);const D=new Uint8Array(16);D.set(mt(e.name,(l=x.configuration)==null?void 0:l.charset).subarray(0,16),0),_.set(D,p)}else i.set(E("ffffffffffffffffffffffffffffffff"),p),S.set([15],p>>4),_.set(E("ffffffffffffffffffffffffffffffff"),p);p+=16});for(let e=0;e<3200;e+=128)await U(x.connectPort,e,i.slice(e,e+128),128,(O=x.configuration)==null?void 0:O.uart);await U(x.connectPort,3424,S,200);for(let e=3920;e<7120;e+=128)await U(x.connectPort,e,_.slice(e-3920,e-3920+128),128,(F=x.configuration)==null?void 0:F.uart);await ft(x.connectPort),y(!1)},R=async i=>{u.renderData[i]={}},j=()=>{const i=JSON.stringify(u.renderData),S=new Blob([i],{type:"application/octet-stream"}),_=URL.createObjectURL(S),p=document.createElement("a");p.download="channel.json",p.href=_,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(_)},M=()=>{const i=document.createElement("input");i.type="file",i.onchange=async()=>{const _=await new Blob([i.files[0]],{type:"application/octet-stream"}).text();u.renderData=JSON.parse(_)},i.click()};return(i,S)=>{const _=X("Breadcrumb"),p=W,O=Y,F=Z,e=tt,l=et,a=at,c=ot,f=nt,T=ut,D=rt,H=lt,L=dt;return d(),b("div",xt,[r(_,{items:["\u5199\u9891","\u4FE1\u9053\u7BA1\u7406"]}),r(L,{class:"general-card",title:i.$t("\u4FE1\u9053\u7BA1\u7406")},{default:n(()=>[r(l,{style:{"margin-bottom":"16px"}},{default:n(()=>[r(e,{span:12},{default:n(()=>[r(F,null,{default:n(()=>[r(O,{type:"primary",onClick:k},{icon:n(()=>[r(p)]),default:n(()=>[m(" \u4ECE\u8BBE\u5907\u8BFB\u53D6 ")]),_:1}),r(O,{onClick:P},{icon:n(()=>[r(p)]),default:n(()=>[m(" \u5199\u5165\u8BBE\u5907 ")]),_:1})]),_:1})]),_:1}),r(e,{span:12,style:{"text-align":"right"}},{default:n(()=>[r(F,null,{default:n(()=>[r(O,{type:"primary",onClick:j},{default:n(()=>[m(" \u4FDD\u5B58 ")]),_:1}),r(O,{onClick:M},{default:n(()=>[m(" \u52A0\u8F7D ")]),_:1})]),_:1})]),_:1})]),_:1}),r(H,{loading:q(h),columns:v.value,data:u.renderData,style:{"margin-top":"20px"},pagination:{pageSize:15,current:u.nowPage},onPageChange:S[0]||(S[0]=o=>{u.nowPage=o})},{index:n(({record:o,rowIndex:s})=>[m(C((u.nowPage-1)*15+s+1),1)]),name:n(({record:o,rowIndex:s})=>[r(a,{modelValue:o.name,"onUpdate:modelValue":t=>o.name=t},null,8,["modelValue","onUpdate:modelValue"])]),bandwidth:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.bandwidth,"onUpdate:modelValue":t=>o.bandwidth=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(Object.keys(u.bandwidthOption),t=>(d(),g(c,{value:t},{default:n(()=>{var w;return[m(C((w=u.bandwidthOption[t])!=null?w:t),1)]}),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),tx:n(({record:o,rowIndex:s})=>[r(T,{modelValue:o.tx,"onUpdate:modelValue":t=>o.tx=t,precision:5},null,8,["modelValue","onUpdate:modelValue"])]),rx:n(({record:o,rowIndex:s})=>[r(T,{modelValue:o.rx,"onUpdate:modelValue":t=>o.rx=t,precision:5},null,8,["modelValue","onUpdate:modelValue"])]),power:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.power,"onUpdate:modelValue":t=>o.power=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(Object.keys(u.powerOption),t=>(d(),g(c,{value:t},{default:n(()=>{var w;return[m(C((w=u.powerOption[t])!=null?w:t),1)]}),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),rxTone:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.rxTone,"onUpdate:modelValue":t=>o.rxTone=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(Object.keys(u.toneOption),t=>(d(),g(c,{value:t},{default:n(()=>{var w;return[m(C((w=u.toneOption[t])!=null?w:t),1)]}),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),rxCTCSS:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.rxCTCSS,"onUpdate:modelValue":t=>o.rxCTCSS=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.CTCSSOption,t=>(d(),g(c,{value:t},{default:n(()=>[m(C(t.toFixed(1)),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),rxDCS:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.rxDCS,"onUpdate:modelValue":t=>o.rxDCS=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.DCSOption,t=>(d(),g(c,{value:t},{default:n(()=>[m(C("0"+t),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),txTone:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.txTone,"onUpdate:modelValue":t=>o.txTone=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(Object.keys(u.toneOption),t=>(d(),g(c,{value:t},{default:n(()=>{var w;return[m(C((w=u.toneOption[t])!=null?w:t),1)]}),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),txCTCSS:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.txCTCSS,"onUpdate:modelValue":t=>o.txCTCSS=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.CTCSSOption,t=>(d(),g(c,{value:t},{default:n(()=>[m(C(t.toFixed(1)),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),txDCS:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.txDCS,"onUpdate:modelValue":t=>o.txDCS=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.DCSOption,t=>(d(),g(c,{value:t},{default:n(()=>[m(C("0"+t),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),step:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.step,"onUpdate:modelValue":t=>o.step=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.stepOption,t=>(d(),g(c,{value:t},{default:n(()=>[m(C(t.toFixed(1)),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),reverse:n(({record:o,rowIndex:s})=>[r(D,{modelValue:o.reverse,"onUpdate:modelValue":t=>o.reverse=t},null,8,["modelValue","onUpdate:modelValue"])]),scramb:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.scramb,"onUpdate:modelValue":t=>o.scramb=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.scrambOption,t=>(d(),g(c,null,{default:n(()=>[m(C(t),1)]),_:2},1024))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),busy:n(({record:o,rowIndex:s})=>[r(D,{modelValue:o.busy,"onUpdate:modelValue":t=>o.busy=t},null,8,["modelValue","onUpdate:modelValue"])]),pttid:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.pttid,"onUpdate:modelValue":t=>o.pttid=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(u.pttidOption,t=>(d(),g(c,null,{default:n(()=>[m(C(t),1)]),_:2},1024))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),mode:n(({record:o,rowIndex:s})=>[r(f,{modelValue:o.mode,"onUpdate:modelValue":t=>o.mode=t,"allow-clear":""},{default:n(()=>[(d(!0),b(V,null,I(Object.keys(u.modeOption),t=>(d(),g(c,{value:t},{default:n(()=>{var w;return[m(C((w=u.modeOption[t])!=null?w:t),1)]}),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),dtmf:n(({record:o,rowIndex:s})=>[r(D,{modelValue:o.dtmf,"onUpdate:modelValue":t=>o.dtmf=t},null,8,["modelValue","onUpdate:modelValue"])]),operate:n(({record:o,rowIndex:s})=>[r(O,{onClick:t=>R((u.nowPage-1)*15+s)},{default:n(()=>[m("\u6E05\u7A7A")]),_:2},1032,["onClick"])]),_:1},8,["loading","columns","data","pagination"])]),_:1},8,["title"])])}}});const Nt=J(wt,[["__scopeId","data-v-85aaef8a"]]);export{Nt as default};
